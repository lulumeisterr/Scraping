package br.com.scraping.controller;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.select.Elements;

import br.com.scraping.model.Noticia;

public class RecuperandoInformacaoController {
	
	public static void main(String[] args) {
		buscarLinks();
	}

	private static String URL = "https://noticias.uol.com.br/ultimas/index.htm";

	static ArrayList<Noticia> listaNoticias = new ArrayList<Noticia>();

	public static List<Noticia> buscarLinks() {
		Noticia noticias = null;
		Document document = null;
		try {
			document = Jsoup.connect(URL).userAgent("Jsoup").get();
		}catch(Exception e) {
			e.printStackTrace();
			System.out.println("Erro na URL");
			return null;
		}

		Elements e = document.getElementsByClass("thumbnail-standard");
		ArrayList<Noticia> objetos = new ArrayList<Noticia>();
		
		HashMap<Integer, Object> a = new HashMap<Integer, Object>();
		
		noticias = new Noticia();
		int i = 0;
		while(i < e.size()) {
			noticias.setCanalAbertura(e.get(i).select(".thumb-kicker").text());
			//System.out.println(e.get(i).select(".thumb-title").text().replace(",", ""));
			//System.out.println(e.get(i).select("a").attr("href"));
			//System.out.println(e.get(i).select("time").first().text());
		
			objetos.add(noticias);
			
			i++;
		}
	
		/*
		int i = 0;
		for(Element es : e) {
			
			//noticias.setCanalAbertura(es.getElementsByIndexEquals(i).select(".thumb-kicker").text());
			//noticias.setTitulo(es.getElementsByIndexEquals(i).select(".thumb-title").text().replace(",", ""));
			//noticias.setLink(es.getElementsByIndexEquals(i).select("a").attr("href"));
			//noticias.setHora(es.getElementsByIndexEquals(i).select("time").first().text());
			
				a.put(i, noticias);
				i++;
	
		}
		*/

		//this.listaNoticias.add(noticias);
		return listaNoticias;
	}

}
